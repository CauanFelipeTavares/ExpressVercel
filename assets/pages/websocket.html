<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>WebSocket Test</title>
  </head>
  <body>
    <h1>WebSocket Test</h1>
    <div id="output"></div>

    <script>

      let url = window.location.href

      url.includes('https') ? url = url.replace('https', 'wss') : url = url.replace('http', 'ws')
//wss://31.220.61.189
//ws://localhost
      url = 'wss://31.220.61.189/ws'

      console.log('url', url)

      try{

        const socket = new WebSocket(url)

        socket.onclose((ev) => console.log('Err', ev))

        console.log(socket)

        setInterval(() => socket.send('abc'), 2000)

        // socket.onclose((ev) => console.log(ev))

      }catch(err){

        console.log('Err', err)

      }

      //setInterval(() => socket.send('1'), 2000)

      // socket.onmessage = function (event) {

      //   document.getElementById('output').innerHTML = event.data

      // }

    </script>
  </body>
</html>